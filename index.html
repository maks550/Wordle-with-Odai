<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Вгадай слово</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f5;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
      font-size: 32px;
    }
    .difficulty {
      margin-top: 20px;
    }
    .difficulty button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
    }
    .easy { background-color: #4CAF50; }
    .medium { background-color: #ffb700; }
    .hard { background-color: #f44336; }

    .container {
      max-width: 500px;
      margin: 0 auto;
      padding-top: 20px;
    }

    .grid-row {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin-bottom: 10px;
    }

    .cell {
      width: 50px;
      height: 50px;
      border: 2px solid #000;
      font-size: 32px;
      line-height: 50px;
      background-color: #fff;
    }

    .keyboard {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 360px;
      margin: 20px auto;
      gap: 5px;
    }
    .key {
      width: 40px;
      height: 50px;
      font-size: 18px;
      cursor: pointer;
      background-color: #dcdcdc;
      border: none;
      border-radius: 5px;
    }
    .green { background-color: #6aaa64 !important; color: white; }
    .yellow { background-color: #c9b458 !important; color: white; }
    .gray { background-color: #787c7e !important; color: white; }

    .attempts {
      max-height: 160px;
      overflow-y: auto;
      margin-top: 10px;
    }

    .controls {
      margin-top: 20px;
    }
    .controls button {
      padding: 10px 15px;
      font-size: 18px;
      cursor: pointer;
      margin: 5px;
      border-radius: 10px;
      border: none;
      background-color: orange;
      color: white;
    }

    .developer {
      margin-top: 20px;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>
<body>
  <h1>Вгадай слово</h1>

  <div class="difficulty" id="difficulty-choice">
    <p>Вибери складність:</p>
    <button class="easy" onclick="setDifficulty('easy')">Лайтовий</button>
    <button class="medium" onclick="setDifficulty('medium')">Середній</button>
    <button class="hard" onclick="setDifficulty('hard')">Сильний</button>
  </div>

  <div class="container" id="game-container" style="display:none;">
    <div id="input-grid"></div>

    <div class="attempts" id="attempts"></div>

    <div class="keyboard" id="keyboard"></div>

    <div class="controls">
      <button onclick="submitGuess()">OK</button>
      <button onclick="useHint()">H</button>
      <button onclick="startNewGame()">New</button>
    </div>

    <div class="developer">Розробник: Максим Ткачук</div>
  </div>

  <script>
    const words = {
      easy: ["МІСТО", "КНИГА", "НОТА"],
      medium: ["ГІТАР", "ПАРТА", "КОРДО"],
      hard: ["ЩАСТЯ", "КРИГА", "ЗРАДА"]
    };

    let selectedDifficulty = "easy";
    let currentWord = "";
    let currentAttempt = [];
    let attempts = [];
    let maxAttempts = 6;
    let usedHint = false;

    function setDifficulty(difficulty) {
      selectedDifficulty = difficulty;
      document.getElementById('difficulty-choice').style.display = 'none';
      document.getElementById('game-container').style.display = 'block';
      startNewGame();
    }

    function startNewGame() {
      const list = words[selectedDifficulty];
      currentWord = list[Math.floor(Math.random() * list.length)].toUpperCase();
      currentAttempt = [];
      attempts = [];
      usedHint = false;
      renderInputGrid();
      renderKeyboard();
      renderAttempts();
    }

    function renderInputGrid() {
      const grid = document.getElementById("input-grid");
      grid.innerHTML = "";
      const row = document.createElement("div");
      row.className = "grid-row";
      for (let i = 0; i < currentWord.length; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.textContent = currentAttempt[i] || "";
        row.appendChild(cell);
      }
      grid.appendChild(row);
    }

    function renderAttempts() {
      const attemptsDiv = document.getElementById("attempts");
      attemptsDiv.innerHTML = "";
      attempts.forEach(word => {
        const row = document.createElement("div");
        row.className = "grid-row";
        for (let i = 0; i < word.length; i++) {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.textContent = word[i].letter;
          cell.classList.add(word[i].color);
          row.appendChild(cell);
        }
        attemptsDiv.appendChild(row);
      });
    }

    function renderKeyboard() {
      const letters = "АБВГҐДЕЄЖЗИІЇЙКЛМНОПРСТУФХЦЧШЩЬЮЯ".split("");
      const kb = document.getElementById("keyboard");
      kb.innerHTML = "";
      letters.forEach(letter => {
        const btn = document.createElement("button");
        btn.className = "key";
        btn.textContent = letter;
        btn.onclick = () => addLetter(letter);
        kb.appendChild(btn);
      });
      const del = document.createElement("button");
      del.className = "key";
      del.textContent = "DEL";
      del.onclick = deleteLetter;
      kb.appendChild(del);
    }

    function addLetter(letter) {
      if (currentAttempt.length < currentWord.length) {
        currentAttempt.push(letter);
        renderInputGrid();
      }
    }

    function deleteLetter() {
      currentAttempt.pop();
      renderInputGrid();
    }

    function submitGuess() {
      if (currentAttempt.length !== currentWord.length) return;

      const guess = currentAttempt.join("");
      const result = [];
      const used = {};

      for (let i = 0; i < currentWord.length; i++) {
        if (guess[i] === currentWord[i]) {
          result.push({ letter: guess[i], color: "green" });
          used[i] = true;
        } else {
          result.push({ letter: guess[i], color: "gray" });
        }
      }

      for (let i = 0; i < currentWord.length; i++) {
        if (result[i].color === "gray") {
          for (let j = 0; j < currentWord.length; j++) {
            if (!used[j] && guess[i] === currentWord[j]) {
              result[i].color = "yellow";
              used[j] = true;
              break;
            }
          }
        }
      }

      attempts.push(result);
      currentAttempt = [];
      renderInputGrid();
      renderAttempts();

      if (guess === currentWord) {
        setTimeout(() => alert("Правильно!"), 100);
      } else if (attempts.length >= maxAttempts) {
        setTimeout(() => alert(`Мені жаль, але ви програли. Слово було: ${currentWord}`), 100);
        setTimeout(startNewGame, 500);
      }
    }

    function useHint() {
      if (usedHint) return alert("Підказка вже використана!");
      currentAttempt = [currentWord[0]];
      renderInputGrid();
      usedHint = true;
    }
  </script>
</body>
</html>
